Rails -v 5.1.4

1)
  #Terminal
    - rails new  <file-name> --api -d postgresql

2)
  # ./gemfile

    Add

      - gem 'devise'

      - gem 'jwt'
        - Allows us to use JsonWebTokens

      - gem 'responders'
        - Gives us the ability to add a respond_to call into our
        ApplicationController, so that every controller which inherits from it
        knows to respond using JSON, which means we don't have to worry about
        rendering anything else.

    Uncomment

      - gem 'rack-cors'
        - Used to ignore browsers cors

3)
  # Terminal
    - rails g devise:install

4)
  # Terminal
    - rails g devise User first_name:string last_name:string
    - rake db:migrate
      - Create a new user model with all the devise properties. Also with first name
      and last name properties.


5)
  # Terminal
    - createdb rails_auth_development

6)
  # Create controller registratons_controller.rb containing:

    class RegistrationsController < ApplicationController
      respond_to :json

      def create
        if(User.exists?(email: params[:email]))
          render json: {respons: "user exists"}
        else
          user = User.create({email: params[:email], password: params[:password]})
          render json: token_hash(user)
        end
      end

    end

7)
  # ./config/routes.rb
    Add
      - resources :registrations

8)
  # Add to ApplicationController

  protected

  def token_hash(user)
    if(user && user.id)
      return {
        auth_token: JsonWebToken.encode(user_id: user.id),
        user: {id: user.id, email: user.email, admin: false}
      }
    else
      return nil
    end
  end
